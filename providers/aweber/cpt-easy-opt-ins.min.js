jQuery(document).ready(function(e){function a(){e("option",'[name="fca_eoi[aweber_list_id]"]').length>0?(n.show("fast"),s.show("fast")):(n.hide(),s.hide())}function t(a){if("string"==typeof a&&a){var t='<span class="aweber-tag-wrapper"><span class="dashicons dashicons-dismiss aweber-tag-delete"></span><span class="aweber-tag">'+a.trim()+"</span></span>";e("#aweber-tag-div").append(t),i(),e(".aweber-tag-delete").unbind("click"),e(".aweber-tag-delete").click(function(){e(this.parentNode).remove(),i()})}}function i(){var a="";e(".aweber-tag").each(function(){a+=e(this).html()+", "}),e("#aweber_tag_hidden_input").val(a.slice(0,a.length-2))}var o=e('[name="fca_eoi[aweber_authorization_code]"]'),r=e("#post_ID"),n=(e('[name="fca_eoi[aweber_list_id]"]'),e("#aweber_list_id_wrapper")),s=e("#aweber_tags_wrapper");a(),fca_eoi_provider_status_setup("aweber",o),o.bind("input",function(){if(fca_eoi_provider_is_value_changed(e(this))){fca_eoi_provider_status_set("aweber",fca_eoi_provider_status_codes.loading);var t={action:"fca_eoi_aweber_get_lists",aweber_authorization_code:o.val().trim(),post_id:r.val()};e.post(ajaxurl,t,function(t){if(console.log(t),fca_eoi_provider_status_set("aweber",fca_eoi_provider_status_codes.error),t.success){var i=t.data;fca_eoi_provider_status_set("aweber",fca_eoi_provider_status_codes.ok);var o=e('<select class="select2" style="width: 27em;" name="fca_eoi[aweber_list_id]" >');for(list_id in i)o.append('<option value="'+list_id+'">'+i[list_id]+"</option>");e('[name="fca_eoi[aweber_list_id]"]').select2("destroy"),e('[name="fca_eoi[aweber_list_id]"]').replaceWith(o),e('[name="fca_eoi[aweber_list_id]"]').select2(),a()}})}}),o.filter("[readonly=readonly]").click(function(e){window.confirm("Due to limitations in the AWeber API, The plugin accepts only one AWeber app, thus, changing the authorization code in this form will change it in all other forms.\n\nDo you really want to change the authorization code?")&&o.removeAttr("readonly").val("")}),e("#aweber_add_tag").click(function(){for(var a=e("#aweber_tag_text_input").val().split(","),i=0,o=a.length;i<o;i++)t(a[i]);e("#aweber_tag_text_input").val("")}),e("#aweber_tag_text_input").keyup(function(a){13==a.keyCode&&e("#aweber_add_tag").click()}),function(){if(fcaEoiAweberSettings.hasOwnProperty("tags")&&""!==fcaEoiAweberSettings.tags)for(var e=fcaEoiAweberSettings.tags.split(", "),a=0,i=e.length;a<i;a++)t(e[a])}()});